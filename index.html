<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Bypass Interface - Sprachausgabe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #020202;
            color: #e0e0e0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
            touch-action: none;
        }

        .fractal-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }

        .pulse-circle {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(64,123,255,0.4) 0%, rgba(0,0,0,0) 75%);
            box-shadow: 0 0 50px rgba(64,123,255,0.2);
            animation: pulse 8s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(0.9); opacity: 0.2; filter: blur(8px); }
            50% { transform: scale(1.3); opacity: 0.7; filter: blur(2px); }
            100% { transform: scale(0.9); opacity: 0.2; filter: blur(8px); }
        }

        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.9);
            transition: opacity 1.5s ease;
        }

        .hidden { display: none; }

        .trigger-button {
            padding: 20px 50px;
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }

        .trigger-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(59, 130, 246, 0.8);
        }

        #interaction-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 50;
            display: none;
        }

        .vignette {
            position: absolute;
            width: 100%; height: 100%;
            box-shadow: inset 0 0 200px #000;
            pointer-events: none;
            z-index: 10;
        }
    </style>
</head>
<body>

    <div class="vignette"></div>

    <div class="fractal-container">
        <div class="pulse-circle" id="main-circle"></div>
    </div>

    <div id="start-screen" class="overlay">
        <h1 class="text-3xl font-light mb-4 tracking-widest text-blue-400">NEURAL BYPASS</h1>
        <p class="text-gray-400 mb-10 text-center px-6 max-w-md italic">
            "Die kritische Instanz wird jetzt umgangen. Deine neurologische Neuprogrammierung beginnt."
        </p>
        <button class="trigger-button" onclick="startMasterInduction()">SITZUNG STARTEN</button>
        <p class="mt-6 text-xs text-gray-600 uppercase tracking-tighter">Audio wird über WebSpeech aktiviert</p>
    </div>

    <div id="interaction-layer"></div>

    <div class="absolute bottom-12 w-full text-center z-[60] pointer-events-none">
        <p id="sub-text" class="text-lg font-light tracking-wide text-blue-200 opacity-0 transition-opacity duration-1000"></p>
    </div>

    <script>
        const subText = document.getElementById('sub-text');
        const mainCircle = document.getElementById('main-circle');
        const startScreen = document.getElementById('start-screen');
        const interactionLayer = document.getElementById('interaction-layer');
        
        const synth = window.speechSynthesis;
        let voice = null;

        // Auswahl einer geeigneten, tiefen Stimme
        function getVoice() {
            const voices = synth.getVoices();
            // Versuche eine deutsche Stimme zu finden, idealerweise männlich/tief falls verfügbar
            return voices.find(v => v.lang.startsWith('de')) || voices[0];
        }

        function speak(text, rate = 0.8, pitch = 0.8) {
            return new Promise((resolve) => {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.voice = getVoice();
                utterance.rate = rate;
                utterance.pitch = pitch;
                utterance.onend = resolve;
                utterance.onstart = () => {
                    subText.innerText = text;
                    subText.style.opacity = 1;
                };
                synth.speak(utterance);
            });
        }

        async function startMasterInduction() {
            startScreen.style.opacity = '0';
            setTimeout(() => startScreen.classList.add('hidden'), 1500);

            // Audio-Kontext für Binaurale Effekte starten
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(200, audioCtx.currentTime); 
            gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();

            // TEIL 1: FIXIERUNG (ELMAN)
            await speak("Fixiere jetzt den pulsierenden Punkt auf dem Bildschirm. Atme tief ein.");
            await speak("Und während du ausatmest, lass deine Augenlider schwer werden. So schwer, dass sie sich einfach schließen wollen.");
            await speak("Versuche jetzt, diese Lider so fest zu entspannen, dass sie einfach nicht mehr funktionieren.");
            
            // TEIL 2: FRAKTIONIERUNG
            interactionLayer.style.display = 'block';
            for(let i=0; i<2; i++) {
                await speak("Gleich berührst du den Bildschirm, um die Augen kurz zu öffnen.");
                await speak("Berühre jetzt.");
                await waitForInteraction('pointerdown');
                mainCircle.style.background = "white";
                mainCircle.style.filter = "blur(0px)";
                
                await speak("Und lass los. Schließe sie. Geh zehnmal tiefer.");
                await waitForInteraction('pointerup');
                mainCircle.style.background = "radial-gradient(circle, rgba(64,123,255,0.4) 0%, rgba(0,0,0,0) 75%)";
                mainCircle.style.filter = "blur(8px)";
            }

            // TEIL 3: TRIGGER INSTALLATION
            await speak("Du bist jetzt bereit für die neuronale Verankerung.");
            await speak("Konzentriere dich auf deine rechte Hand.");
            await speak("Wenn ich jetzt sage, drückst du Daumen und Zeigefinger zusammen.");
            
            // Peak Moment
            subText.style.color = "#ffffff";
            subText.style.fontSize = "2rem";
            if (window.navigator.vibrate) window.navigator.vibrate([200, 100, 500]);
            
            await speak("JETZT. Drücke sie zusammen. Das ist dein Anker.", 0.7, 0.7);
            mainCircle.style.transform = "scale(5)";
            mainCircle.style.opacity = "1";
            
            await speak("Wann immer du diesen Griff machst und das Wort DEEP NOW denkst, wird dein Nervensystem diesen Zustand sofort reproduzieren.");
            await speak("Es ist ein physikalisches Gesetz deines Geistes geworden.");
            
            // TEIL 4: VERSIEGELUNG
            await speak("Die Verbindung ist permanent. Zähle nun von drei bis eins und wachse auf.");
            await speak("Drei. Zwei. Eins. Hellwach.");
            
            location.reload();
        }

        function waitForInteraction(event) {
            return new Promise(resolve => {
                const handler = () => {
                    interactionLayer.removeEventListener(event, handler);
                    resolve();
                };
                interactionLayer.addEventListener(event, handler);
            });
        }

        // Stimmen laden (Chrome/Safari Fix)
        window.speechSynthesis.onvoiceschanged = getVoice;

    </script>
</body>
</html>
